/*
 model.js v1.1.0 (c) 2013 knowledgecode | MIT licensed
*/
(function(){var k=function(k){var e={},f="object"===typeof k?k:{},h={},j={},g=function(a,c,b){a=h[a];var d,e,f,g=function(){f.call(f,c,b)};if(a){d=0;for(e=a.length;d<e;d++)f=a[d],setTimeout(g,0)}},l=function(a,c){var b=j[a];b?(b=b.call(b,c))?(g("error@"+a,c,b),b=!1):b=!0:b=!0;return b};e.get=function(a){return f[a]};e.add=function(a,c,b){if("string"!==typeof a)throw"Unexpected type.";if(f.hasOwnProperty(a))throw"Already exist.";l(a,c)&&(f[a]=c,b||(g("change@"+a,void 0,c),g("change",a,void 0)))};e.update=
function(a,c,b){var d;if("string"!==typeof a)throw"Unexpected type.";if(!f.hasOwnProperty(a))throw"Not defined.";d=f[a];l(a,c)&&(f[a]=c,b||(g("change@"+a,d,c),g("change",a,void 0)))};e.remove=function(a,c){var b;if("string"!==typeof a)throw"Unexpected type.";if(!f.hasOwnProperty(a))throw"Not defined.";b=f[a];delete f[a];c||(g("change@"+a,b,void 0),g("change",a,void 0))};e.clear=function(a){f={};a||g("change","*",void 0)};e.validate=function(a,c){if("string"!==typeof a)throw"Unexpected type.";if(j.hasOwnProperty(a))throw"Already exist.";
j[a]=c};e.removeValidation=function(a){if("string"!==typeof a)throw"Unexpected type.";if(!j.hasOwnProperty(a))throw"Not defined.";delete j[a]};e.clearValidations=function(){j={}};e.on=function(a,c){var b=function(a,b){if("string"!==typeof a)throw"Unexpected type.";h[a]=h[a]||[];h[a].push(b);return b},d;if("object"===typeof a&&void 0===c){for(d in a)a.hasOwnProperty(d)&&b(d,a[d]);return a}return b(a,c)};e.off=function(a,c){var b=function(a,b){var c,d,e;if("string"!==typeof a)throw"Unexpected type.";
if(c=h[a]){d=0;for(e=c.length;d<e;d++)if(c[d]===b){c.splice(d,1);0===c.length&&delete h[a];break}}},d;if("object"===typeof a&&void 0===c)for(d in a)a.hasOwnProperty(d)&&b(d,a[d]);else b(a,c)};e.clearBindings=function(){h={}};e.exports=function(){return f};return e};"object"===typeof module&&module.exports?module.exports=k:$&&$.fn?$.fn.model=k:window.model=k})();
